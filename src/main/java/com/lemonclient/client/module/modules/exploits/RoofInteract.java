package com.lemonclient.client.module.modules.exploits;

import com.lemonclient.api.event.events.PacketEvent;
import com.lemonclient.api.setting.values.IntegerSetting;
import com.lemonclient.client.module.Category;
import com.lemonclient.client.module.Module;
import java.util.function.Predicate;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.network.play.client.CPacketPlayerTryUseItemOnBlock;
import net.minecraft.util.EnumFacing;

@Module.Declaration(
   name = "RoofInteract",
   category = Category.Exploits
)
public class RoofInteract extends Module {
   IntegerSetting y = this.registerInteger("Y", 255, 0, 255);
   @EventHandler
   private final Listener<PacketEvent.Send> packetListener = new Listener((event) -> {
      if (event.getPacket() instanceof CPacketPlayerTryUseItemOnBlock) {
         CPacketPlayerTryUseItemOnBlock packet = (CPacketPlayerTryUseItemOnBlock)event.getPacket();
         if (packet.func_187023_a().func_177956_o() >= (Integer)this.y.getValue() && packet.func_187024_b() == EnumFacing.UP) {
            mc.field_71439_g.field_71174_a.func_147297_a(new CPacketPlayerTryUseItemOnBlock(packet.func_187023_a(), EnumFacing.DOWN, packet.func_187022_c(), packet.func_187026_d(), packet.func_187025_e(), packet.func_187020_f()));
            event.cancel();
         }
      }

   }, new Predicate[0]);
}
