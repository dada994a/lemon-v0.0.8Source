package com.lemonclient.client.module.modules.exploits;

import com.lemonclient.api.setting.values.BooleanSetting;
import com.lemonclient.api.util.chat.Notification;
import com.lemonclient.api.util.misc.MessageBus;
import com.lemonclient.client.module.Category;
import com.lemonclient.client.module.Module;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.function.Predicate;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.entity.Entity;
import net.minecraft.entity.passive.EntityDonkey;
import net.minecraft.entity.passive.EntityHorse;
import net.minecraft.entity.passive.EntityLlama;
import net.minecraft.entity.passive.EntitySkeletonHorse;
import net.minecraft.entity.passive.EntityZombieHorse;
import net.minecraft.util.math.BlockPos;
import net.minecraftforge.client.event.InputUpdateEvent;

@Module.Declaration(
   name = "MountFinder",
   category = Category.Exploits
)
public class MountFinder extends Module {
   BooleanSetting horse = this.registerBoolean("horse", true);
   BooleanSetting donkey = this.registerBoolean("Donkey", true);
   BooleanSetting llama = this.registerBoolean("Llama", true);
   BooleanSetting autowalk = this.registerBoolean("AutoWalk", false);
   ArrayList<BlockPos> horses = new ArrayList();
   ArrayList<BlockPos> donkeys = new ArrayList();
   ArrayList<BlockPos> llamas = new ArrayList();
   @EventHandler
   private final Listener<InputUpdateEvent> inputUpdateEventListener = new Listener((event) -> {
      if ((Boolean)this.autowalk.getValue() && mc.field_71439_g != null) {
         event.getMovementInput().field_192832_b = 1.0F;
      }

   }, new Predicate[0]);

   public void onUpdate() {
      Iterator var1 = mc.field_71441_e.field_72996_f.iterator();

      while(var1.hasNext()) {
         Entity entity = (Entity)var1.next();
         BlockPos pos = entity.func_180425_c();
         if ((entity instanceof EntityHorse || entity instanceof EntitySkeletonHorse || entity instanceof EntityZombieHorse) && !this.horses.contains(pos)) {
            this.horses.add(pos);
            if ((Boolean)this.horse.getValue()) {
               MessageBus.sendClientPrefixMessage("Found a horse at" + pos, Notification.Type.INFO);
            }
         }

         if (entity instanceof EntityDonkey && !this.donkeys.contains(pos)) {
            this.donkeys.add(pos);
            if ((Boolean)this.donkey.getValue()) {
               MessageBus.sendClientPrefixMessage("Found a donkey at" + pos, Notification.Type.INFO);
            }
         }

         if (entity instanceof EntityLlama && !this.llamas.contains(pos)) {
            this.llamas.add(pos);
            if ((Boolean)this.llama.getValue()) {
               MessageBus.sendClientPrefixMessage("Found a llama at" + pos, Notification.Type.INFO);
            }
         }
      }

   }
}
